<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>HeoCon88 - Trang chủ</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Outfit', sans-serif;
        background-color: #0f172a;
        background-image: 
            radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
            radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
            radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
        color: #e2e8f0;
        min-height: 100vh;
        -webkit-tap-highlight-color: transparent;
    }

    /* Glassmorphism */
    .glass-nav {
        background: rgba(15, 23, 42, 0.85);
        backdrop-filter: blur(12px);
        border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    .glass-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(16px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }

    /* Card Gradient (ATM style) */
    .credit-card {
        background: linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%);
        box-shadow: 0 10px 25px -5px rgba(168, 85, 247, 0.4);
        position: relative;
        overflow: hidden;
    }
    .credit-card::before {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: radial-gradient(circle at top right, rgba(255,255,255,0.3), transparent 60%);
        pointer-events: none;
    }

    /* Animations */
    @keyframes slideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-slide-up {
        animation: slideUp 0.5s ease-out forwards;
    }
    
    .menu-item {
        transition: transform 0.2s, background 0.2s;
    }
    .menu-item:active {
        transform: scale(0.96);
        background: rgba(255,255,255,0.1);
    }
</style>
</head>
<body class="flex flex-col pb-20">

<!-- BACKGROUND DECORATION -->
<div class="fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none -z-10">
    <div class="absolute top-[-10%] right-[-20%] w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"></div>
    <div class="absolute bottom-[20%] left-[-10%] w-60 h-60 bg-blue-500/20 rounded-full blur-3xl"></div>
</div>

<!-- HEADER -->
<header class="glass-nav sticky top-0 z-50 px-5 py-4 flex justify-between items-center">
    <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-yellow-400 to-orange-500 flex items-center justify-center shadow-lg">
            <i class="fa-solid fa-piggy-bank text-white text-lg"></i>
        </div>
        <div>
            <h1 class="font-bold text-lg leading-tight text-white">HeoCon88</h1>
            <p class="text-[11px] text-slate-400">Welcome back!</p>
        </div>
    </div>
    <div class="flex items-center gap-3">
        <button onclick="goNotice()" class="w-9 h-9 rounded-full bg-slate-800/50 flex items-center justify-center hover:bg-slate-700 transition relative">
            <i class="fa-regular fa-bell text-slate-300"></i>
            <span class="absolute top-2 right-2.5 w-2 h-2 bg-red-500 rounded-full border border-slate-900"></span>
        </button>
        <button onclick="logout()" class="w-9 h-9 rounded-full bg-red-500/10 flex items-center justify-center hover:bg-red-500/20 transition text-red-400">
            <i class="fa-solid fa-right-from-bracket text-sm"></i>
        </button>
    </div>
</header>

<!-- MAIN CONTENT -->
<main class="flex-1 p-5 space-y-6 animate-slide-up">

    <!-- USER GREETING & ID -->
    <div class="flex justify-between items-end px-1">
        <div>
            <p class="text-slate-400 text-xs mb-1">Tài khoản thành viên</p>
            <p id="userLabel" class="font-mono text-sm font-semibold text-white tracking-wide">ID: Loading...</p>
        </div>
        <div class="bg-emerald-500/10 px-2 py-1 rounded-md border border-emerald-500/20">
            <span class="text-[10px] text-emerald-400 font-bold flex items-center gap-1">
                <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span> Online
            </span>
        </div>
    </div>

    <!-- BALANCE CARD (ATM STYLE) -->
    <div class="credit-card rounded-2xl p-6 text-white shadow-2xl">
        <div class="flex justify-between items-start mb-6">
            <i class="fa-solid fa-wifi rotate-90 opacity-70"></i>
            <i class="fa-brands fa-cc-mastercard text-2xl opacity-80"></i>
        </div>
        
        <div>
            <p class="text-xs opacity-80 mb-1">Tổng số dư khả dụng</p>
            <div class="flex items-baseline gap-1">
                <h2 id="balance" class="text-3xl font-bold tracking-tight">0</h2>
                <span class="text-sm font-medium opacity-80">Coin</span>
            </div>
        </div>

        <div class="mt-6 flex justify-between items-end">
            <p class="font-mono text-sm opacity-70">**** **** **** 8888</p>
            <p class="text-[10px] opacity-70">HEOCON88 WALLET</p>
        </div>
    </div>

    <!-- WALLET ACCESS BUTTON (New Design) -->
    <div class="mt-2">
        <button onclick="goAccount()" class="w-full glass-card p-4 rounded-xl flex items-center justify-between hover:bg-white/10 transition group border-l-4 border-l-blue-500">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center group-hover:scale-110 transition shadow-[0_0_15px_rgba(59,130,246,0.3)]">
                    <i class="fa-solid fa-wallet text-xl"></i>
                </div>
                <div class="text-left">
                    <p class="font-bold text-white text-sm">Quản Lý Ví Chính</p>
                    <p class="text-[11px] text-slate-400">Nạp tiền, Rút tiền & Lịch sử GD</p>
                </div>
            </div>
            <i class="fa-solid fa-chevron-right text-slate-500 group-hover:text-white transition"></i>
        </button>
    </div>

    <!-- FEATURE GRID -->
    <div>
        <h3 class="text-sm font-bold text-white mb-3 pl-1 border-l-4 border-purple-500 pl-2">Tiện ích giải trí</h3>
        <div class="grid grid-cols-2 gap-4">
            
            <!-- Hũ sinh lời -->
            <button onclick="goSaving()" class="menu-item glass-card p-4 rounded-2xl text-left relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-3 opacity-10 group-hover:scale-110 transition duration-300">
                    <i class="fa-solid fa-piggy-bank text-6xl text-yellow-400"></i>
                </div>
                <div class="w-12 h-12 rounded-xl bg-yellow-500/20 flex items-center justify-center mb-3 text-yellow-400">
                    <i class="fa-solid fa-vault text-2xl"></i>
                </div>
                <p class="font-bold text-base text-white">Hũ Sinh Lời</p>
                <p class="text-[11px] text-yellow-400 mt-1 font-medium">Lãi suất 499%/năm</p>
            </button>

            <!-- Game Center -->
            <button onclick="goGames()" class="menu-item glass-card p-4 rounded-2xl text-left relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-3 opacity-10 group-hover:scale-110 transition duration-300">
                    <i class="fa-solid fa-gamepad text-6xl text-pink-400"></i>
                </div>
                <div class="w-12 h-12 rounded-xl bg-pink-500/20 flex items-center justify-center mb-3 text-pink-400">
                    <i class="fa-solid fa-gamepad text-2xl"></i>
                </div>
                <p class="font-bold text-base text-white">Kho Game</p>
                <p class="text-[11px] text-pink-400 mt-1 font-medium">Chơi hay nhận thưởng</p>
            </button>

            <!-- CSKH -->
            <button onclick="goSupport()" class="menu-item glass-card p-4 rounded-2xl text-left relative overflow-hidden group">
                <div class="w-10 h-10 rounded-xl bg-sky-500/20 flex items-center justify-center mb-3 text-sky-400">
                    <i class="fa-solid fa-headset text-xl"></i>
                </div>
                <p class="font-bold text-sm text-white">Hỗ trợ 24/7</p>
                <p class="text-[10px] text-slate-400 mt-1">Giải đáp thắc mắc</p>
            </button>

            <!-- Cài đặt -->
            <button onclick="goSetting()" class="menu-item glass-card p-4 rounded-2xl text-left relative overflow-hidden group">
                <div class="w-10 h-10 rounded-xl bg-slate-500/20 flex items-center justify-center mb-3 text-slate-300">
                    <i class="fa-solid fa-gear text-xl"></i>
                </div>
                <p class="font-bold text-sm text-white">Cài đặt</p>
                <p class="text-[10px] text-slate-400 mt-1">Bảo mật tài khoản</p>
            </button>
        </div>
    </div>

</main>

<script>
/* ================= LOGIC GIỮ NGUYÊN ================= */
const db = supabase.createClient(
    "https://sfbaytcmpgceapdcdyer.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNmYmF5dGNtcGdjZWFwZGNkeWVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1NDQ2MzYsImV4cCI6MjA4MTEyMDYzNn0.DeXO91pcCzQJHMcXTk9Eilcsk9IoGIPzOM-Ube4zRb8"
);

let uid = localStorage.getItem("my_wallet_uid");

/* ================= Load dữ liệu ví ================= */
async function loadBalance(){
    if(!uid) return backLogin();
    const {data} = await db.from("users").select("balance,name").eq("id",uid).maybeSingle();
    if(!data) return backLogin();

    document.getElementById("userLabel").innerText = `ID: ${uid}`;
    // Format số dư đẹp hơn
    document.getElementById("balance").innerText = Number(data.balance||0).toLocaleString('vi-VN');
}

/* ================== Điều hướng ================== */
function goAccount(){location.href="taikhoan.html";} // Link sang file ví
function goSaving(){location.href="husinhloi.html";}
function goGames(){alert("Tính năng đang được bảo trì.");}
function goNotice(){alert("Hiện chưa có thông báo mới.");}
function goSupport(){window.open("https://t.me/hc88cskh", "_blank");} 
function goSetting(){alert("Tính năng đang được phát triển.");}

function logout(){
    if(confirm("Bạn có chắc muốn đăng xuất?")){
        localStorage.removeItem("my_wallet_uid");
        location.href="index.html"; 
    }
}

function backLogin(){
    location.href="index.html";
}

/* ========== Chạy khi mở trang ========== */
if(!uid) {
    backLogin();
} else {
    loadBalance();
}
</script>
</body>
</html>

